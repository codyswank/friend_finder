<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="ie=edge" http-equiv="X-UA-Compatible">
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://code.jquery.com/jquery.js">
	</script>
	<title>Friend Finder</title>
</head>
<body>
	<div class="container">
		<h2>Survey Questions</h2>
		<hr>
		<h3><strong>About You</strong></h3>
		<h4>Name (required)</h4><input class="form-control" id="name" required="" type="text">
		<h4>Link to Photo Image (required)</h4><input class="form-control" id="photo" required="" type="text">
		<hr>
		<h3><strong>Question 1</strong></h3>
		<h4>Your mind is always buzzing with unexplored ideas and plans.</h4><select class="form-control" id="q1">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select>
		<h3><strong>Question 2</strong></h3>
		<h4>Generally speaking, you rely more on your experience than your imagination.</h4><select class="form-control" id="q2">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select>
		<h3><strong>Question 3</strong></h3>
		<h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4><select class="form-control" id="q3">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select>
		<h3><strong>Question 4</strong></h3>
		<h4>You rarely do something just out of sheer curiosity.</h4><select class="form-control" id="q4">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select>
		<h3><strong>Question 5</strong></h3>
		<h4>People can rarely upset you.</h4><select class="form-control" id="q5">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select>
		<h3><strong>Question 6</strong></h3>
		<h4>It is often difficult for you to relate to other people’s feelings.</h4><select class="form-control" id="q6">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select>
		<h3><strong>Question 7</strong></h3>
		<h4>In a discussion, truth should be more important than people’s sensitivities.</h4><select class="form-control" id="q7">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select>
		<h3><strong>Question 8</strong></h3>
		<h4>You rarely get carried away by fantasies and ideas.</h4><select class="form-control" id="q8">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select>
		<h3><strong>Question 9</strong></h3>
		<h4>You feel more energetic after spending time with a group of people.</h4><select class="form-control" id="q9">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select>
		<h3><strong>Question 10</strong></h3>
		<h4></h4><select class="form-control" id="q10">
			<option value="">
			</option>
			<option value="1">
				1 (Strongly Disagree)
			</option>
			<option value="2">
				2
			</option>
			<option value="3">
				3
			</option>
			<option value="4">
				4
			</option>
			<option value="5">
				5 (Strongly Agree)
			</option>
		</select><br>
		<br>
        <button type="submit" class="btn btn-danger btn-lg btn-block" id="submit">Submit</button>
	</div>
	<div class="modal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button aria-hidden="true" class="close" data-dismiss="modal" type="button">&times;</button>
					<h4 class="modal-title"></h4>
				</div>
				<div class="modal-body text-center"></div>
				<div class="modal-footer">
					<button class="btn btn-default" data-dismiss="modal" type="button">Close</button>
				</div>
			</div>
		</div>
	</div>
<script type="text/javascript">
    $( "#submit" )
    	.on( "click", function( event ) {
    		event.preventDefault();
    		var matchStatus = $( ".modal-title" );
    		var modalBody = $( ".modal-body" );
    		var name = $( "#name" )
    			.val()
    			.trim();
    		var photo = $( "#photo" )
    			.val();
    		var q1 = parseInt( $( "#q1" )
    			.val() );
    		var q2 = parseInt( $( "#q2" )
    			.val() );
    		var q3 = parseInt( $( "#q3" )
    			.val() );
    		var q4 = parseInt( $( "#q4" )
    			.val() );
    		var q5 = parseInt( $( "#q5" )
    			.val() );
    		var q6 = parseInt( $( "#q6" )
    			.val() );
    		var q7 = parseInt( $( "#q7" )
    			.val() );
    		var q8 = parseInt( $( "#q8" )
    			.val() );
    		var q9 = parseInt( $( "#q9" )
    			.val() );
    		var q10 = parseInt( $( "#q10" )
    			.val() );
    		var userData = {
    			name: name,
    			photo: photo,
    			scores: [
    				q1,
    				q2,
    				q3,
    				q4,
    				q5,
    				q6,
    				q7,
    				q8,
    				q9,
    				q10
    			]
    		};
    		if (
    			( name !== "" ) && ( photo !== "" ) && ( !isNaN( q1 ) ) && ( !isNaN( q2 ) ) && ( !isNaN( q3 ) ) && ( !isNaN( q4 ) ) && ( !isNaN( q5 ) ) && ( !isNaN( q6 ) ) && ( !isNaN( q7 ) ) && ( !isNaN( q8 ) ) && ( !isNaN( q9 ) ) && ( !isNaN( q10 ) ) ) {
    			var currentURL = window.location.origin;
    			$.post( currentURL + "/api/friends", userData, function( data ) {
    				if ( data.name !== undefined ) {
    					matchStatus.html( "Your match" );
    					modalBody.html( "<p> is " + data.name + "</p><img src='' + data.photo + '' height='200'>" );
    				}
    			} );
    		} else {
    			matchStatus.html( "Error..." );
    			modalBody.html( "Please answer all questions on the form." );
    		}
		} );
		</script>
    </body>
</html>